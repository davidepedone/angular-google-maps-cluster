!function(){"use strict";angular.module("ngMapCluster",[]).directive("clusterMap",function(){return{restrict:"E",replace:!0,scope:{places:"=",mapType:"@?",readonly:"@?",responsive:"@?",draggable:"@?",onClickCallback:"=?",markerIcon:"=?",clusterIcon:"=?",clusterCalculator:"=?",updateMarker:"=?"},controller:["$scope",function(a){}],template:'<div class="dp-places-map-wrapper"><div class="dp-places-map-canvas"></div></div>',link:function(a,b,c,d){var e=("true"==a.draggable,{zoom:1});e.mapTypeId=google.maps.MapTypeId.ROADMAP,e.center=new google.maps.LatLng(.1700235,20.7319823);var f,g,h=b.find("div")[0],i=new google.maps.Map(h,e),j=[],k={};a.draggable&&"false"==a.draggable&&(e.draggable=!1,e.scrollwheel=!1),a.mapType&&google.maps.MapTypeId[a.mapType]&&(e.mapTypeId=google.maps.MapTypeId[a.mapType]),a.responsive&&"true"==a.responsive&&(h.className+=" responsive");for(var l=function(b){return function(){a.onClickCallback(b,i)}},m=function(b){return a.markerIcon&&"function"==typeof a.markerIcon?a.markerIcon(b):null},n="",o=function(a){return f=new google.maps.LatLng(a.latitude,a.longitude),n=m(a),g=new google.maps.Marker({position:f,map:i,originalObject:a,icon:n}),google.maps.event.addListener(g,"click",l(g)),k[a.id]&&delete k[a.id],k[a.id]=g,g},p=0;p<a.places.length;p++)j.push(o(a.places[p]));a.updateMarkerInternal=a.updateMarker||{},a.updateMarkerInternal.bulkUpdate=function(a){if("[object Array]"===Object.prototype.toString.call(a)){for(var b=[],c=[],d={},e="",f=!1,g=0,h=a.length;h>g;g++){d=a[g],e=d.id;try{b.push(k[e]),c.push(o(d))}catch(i){}}b.length>0&&(f=!0,r.removeMarkers(b)),c.length>0&&(f=!0,r.addMarkers(c)),f&&r.repaint()}};var q={gridSize:40,minimumClusterSize:2};a.clusterIcon&&"object"==typeof a.clusterIcon&&(q.styles=a.clusterIcon);var r=new MarkerClusterer(i,j,q);a.clusterCalculator&&"function"==typeof a.clusterCalculator&&r.setCalculator(function(b,c){return a.clusterCalculator(b,c)})}}})}();